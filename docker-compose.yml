version: '3.8'

services:
  playwright-cucumber-tests:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: playwright-cucumber-e2e-tests
    environment:
      NODE_ENV: production
      HEADLESS: 'true'
      ENV: ${ENV:-dev}
      BROWSER: ${BROWSER:-chromium}
      SITE: ${SITE:-site1}
    volumes:
      - ./test-results:/app/test-results
      - ./allure-results:/app/allure-results
      - ./videos:/app/videos
    networks:
      - test-network

  # Optional: Example application server (uncomment to use)
  # app-server:
  #   image: nginx:latest
  #   ports:
  #     - "3000:80"
  #   volumes:
  #     - ./public:/usr/share/nginx/html
  #   networks:
  #     - test-network
  #   environment:
  #     NGINX_HOST: localhost
  #     NGINX_PORT: 80

networks:
  test-network:
    driver: bridge
